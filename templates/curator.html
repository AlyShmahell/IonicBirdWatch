<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" 
      type="image/png" 
      href="static/img/icon.png">
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="/static/css/nouislider.min.css" />
    <script src="static/js/nouislider.min.js"></script>
    <script src="static/js/wNumb.min.js"></script>
    <link href="static/css/tag-picker.min.css" rel="stylesheet" />
    <script src="static/js/tag-picker.min.js"></script>
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
      integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
      crossorigin="anonymous"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/css/ol.css"
      type="text/css"
    />
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/build/ol.js"></script>
    <!-- ol-ext -->
    <link
      rel="stylesheet"
      href="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.css"
    />
    <script
      type="text/javascript"
      src="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.js"
    ></script>
    <!-- jQuery Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css"
    />
    <link
      rel="stylesheet"
      href="/static/css/app.css"
    />
    <script src="/static/js/header.js"></script>
    <script src="/static/js/map.js"></script>
    <script src="/static/js/nav.js"></script>
  </head>
  <body class="body-app">
    <p hidden id="url">/curator</p>
    <div class="header bullseye">
      <h1 class="ml2">
        Wild Watch
      </h1>
    </div>
    <div class="main bullseye" id="map">
      <div id="popup" class="ol-popup">
        <a href="#" id="popup-closer" class="ol-popup-closer"></a>
        <div id="popup-content"></div>
      </div>
    </div>
    <div class="nav center">
      <div class="flex">
        <div class="modal">
          <form id="filters" class="filters" action="#" method="GET">
            <label>Type</label>
            <br />
            <input type="text" id="type" name="type" />
            <br />
            <br />
            <br />
            <label>Date Range</label>
            <br />
            <br />
            <br />
            <br />
            <div>
              <div id="daterange"></div>
            </div>
            <script>
              let picker = new TP($("#type")[0], {
                escape: [
                  // Modern browser(s)
                  ",",
                  " ",
                  "\t",
                  "\n",
                  // Legacy browser(s)
                  188,
                  32,
                  9,
                  13,
                ],
                x: true
              });
            </script>
          </form>
        </div>
        <div class="command spacy">
          <a href="/download"><i class="fas fa-download whitefront"></i></a>
          <a href="#filters" rel="modal:open">
            <i class="fas fa-filter whitefront"></i>
          </a>
        </div>
        <div class="list">
          {%for wildlife in data%} 
          <div class="card" id="{{wildlife.cardid}}">
            <div class="wildlife">
              <div class="wildlife-photo">
                <img src="{{ wildlife.photo }}" alt="Avatar" style="width: 100%;" />
              </div>
              <a href="#" class="add_marker" hidden>
                {{wildlife.center}}
              </a>
              <div class="wildlife-distance">
                <i class="fas fa-map-marker-alt"></i>
                {{ wildlife.distance }}
              </div>
              <div class="wildlife-species">
                {{ wildlife.species }}
              </div>
              <div class="wildlife-type">
                {{ wildlife.type }}
              </div>
              <hr class="wildlife-hr" />
              <div class="wildlife-notes">
                {{ wildlife.notes }}
              </div>
            </div>
            {%for report in wildlife.reports%} 
            <div class="report">
              <div class="report-body">
                <div class="report-title">
                  {{ report.title }}
                </div>
                <div class="report-code">
                  {{ report.code }}
                </div>
                <div class="report-text">
                  {{ report.text }}
                </div>
              </div>
              <div class="modal">
                <div id="resolve-report-{{report.id}}" class="bullseye">
                  <form class="form" onsubmit="resolve_report(event)">
                    <h4>Resolve Report</h4>
                    <div class="row">
                      <label for="true"> Resolve Related Reports </label>
                      <input
                        type="radio"
                        id="true"
                        name="cascade"
                      />
                    </div>
                    <br />
                    <input type="number" name="id" hidden value="{{report.id}}"/>
                    <a href="#" rel="modal:close" id="closereport" hidden>Close</a>
                    <button type="submit" class="report-button">
                      <i class="fas fa-paper-plane report-button-i"></i>
                    </button>
                  </form>
                </div>
                <div class="bullseye" id="remove-report-{{report.id}}">
                  <form class="form" onsubmit="remove_report(event)">
                    <h4>Delete Report</h4>
                    <div class="row">
                      <label for="true"> Delete Related Reports </label>
                      <input
                        type="radio"
                        id="true"
                        name="cascade"
                      />
                    </div>
                    <br />
                    <input type="number" name="id" hidden value="{{report.id}}"/>
                    <a href="#" rel="modal:close" id="closereport" hidden>Close</a>
                    <button type="submit" class="report-button">
                      <i class="fas fa-paper-plane report-button-i"></i>
                    </button>
                  </form>
                </div>
              </div>
              <div class="report-options spacy">
                <a href="#resolve-report-{{report.id}}" rel="modal:open">
                  <i class="far fa-check-square"></i>
                </a>
                <a href="#remove-report-{{report.id}}" rel="modal:open">
                  <i class="fas fa-minus-circle"></i>
                </a>
              </div>
            </div>
            {%endfor%} 
          </div>
          {%endfor%} 
        </div>
      </div>
    </div>
    <div class="footer bullseye">
      <p>Copyrights &copy; 2020 Aly Shmahell</p>
      <p></p>
    </div>
  </body>
</html>
